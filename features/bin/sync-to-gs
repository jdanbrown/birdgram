#!/bin/bash -eux

dir="`dirname "$0"`/.."

data_dir="$dir/data"
gs_dir='gs://bubo-data/v0/data'

# WARNING Careful with -d (delete) -- it'd be easy to make a typo that wipes out all of our cloud data...
time gsutil -m rsync -r "$@" {"$data_dir","$gs_dir"}/metadata/
time gsutil -m rsync -r "$@" {"$data_dir","$gs_dir"}/models/
time gsutil -m rsync -r "$@" {"$data_dir","$gs_dir"}/cache/22050hz-1ch-16bit/xc
time gsutil -m rsync -r "$@" {"$data_dir","$gs_dir"}/cache/joblib/sp14/model/feat/
time gsutil -m rsync -r "$@" {"$data_dir","$gs_dir"}/cache/joblib/sp14/model/_feat/
time gsutil -m rsync -r "$@" {"$data_dir","$gs_dir"}/peterson-field-guide/
time gsutil -m rsync -r "$@" {"$data_dir","$gs_dir"}/recordings/
time gsutil -m rsync -r "$@" {"$data_dir","$gs_dir"}/xc/
# TODO Add more paths to sync
# - `gsutil rsync` only has an exclude option (-x), but not include option...
