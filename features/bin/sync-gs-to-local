#!/bin/bash -eux

bin="`dirname "$0"`"
bin="`"$bin"/normpath "$bin"`"
code_dir="`"$bin"/normpath "$bin"/..`"

data_dir="$code_dir/data"
gs_data_dir='gs://bubo-data/v0/data'

# WARNING Careful with -d (delete) -- it'd be easy to make a typo that wipes out all of our cloud data...
# time gsutil -m rsync -r "$@" {"$gs_data_dir","$data_dir"}/ebird/ # TODO
time gsutil -m rsync -r "$@" {"$gs_data_dir","$data_dir"}/artifacts/
time gsutil -m rsync -r "$@" {"$gs_data_dir","$data_dir"}/cache/joblib/sp14/model/feat/
# time gsutil -m rsync -r "$@" {"$gs_data_dir","$data_dir"}/cache/joblib/sp14/model/_feat/  # Slow: >170k small files
# time gsutil -m rsync -r "$@" {"$gs_data_dir","$data_dir"}/xc/data/ # WARNING Larger than local disk
# time gsutil -m rsync -r "$@" {"$gs_data_dir","$data_dir"}/cache/22050hz-1ch-16bit/xc  # WARNING Larger than local disk
